package busRes;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.*;

public class Booking {
	String name;
	static int busNo;
	String date;
	
	Booking(Scanner sc){
		System.out.println("Enter Passenger Name: ");
		name = sc.next();
		
		System.out.println("Enter Bus no: ");
		busNo = sc.nextInt();
		
		System.out.println("Enter Date in dd-mm-yyyy");
		date = sc.next();
		
	}
	
	public static boolean isAvl() throws SQLException
	{
		int capacity = bus.getCapacity(busNo);
		Connection conn = DbConn.getConnection();
		
		String query = "select count(*) from bookings where busNo = ? and date = ?";
		
		PreparedStatement pst = conn.prepareStatement(query);
		
		pst.setInt(1, busNo);
		pst.setString(2, date);
		
		
		
		ResultSet rs =  pst.executeQuery();
		
		int booked = rs.getInt(1);
		return booked < capacity;
	}
}
